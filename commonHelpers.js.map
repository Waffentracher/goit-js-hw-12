{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '42806027-cb009af69a31f8552609fdd7f';\nconst IMAGES_PER_PAGE = 15;\n\nasync function fetchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${IMAGES_PER_PAGE}`;\n\n  try {\n    const response = await axios.get(url);\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return {\n      hits: [],\n      totalHits: 0,\n    };\n  }\n}\n\nexport { fetchImages, IMAGES_PER_PAGE };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst lightbox = new SimpleLightbox('.gallery a', {});\nfunction renderImages(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('card');\n\n    const a = document.createElement('a');\n    a.href = image.largeImageURL;\n    a.setAttribute('data-lightbox', 'gallery');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    const likes = document.createElement('span');\n    likes.textContent = `Likes: ${image.likes}`;\n\n    const views = document.createElement('span');\n    views.textContent = `Views: ${image.views}`;\n\n    const comments = document.createElement('span');\n    comments.textContent = `Comments: ${image.comments}`;\n\n    const downloads = document.createElement('span');\n    downloads.textContent = `Downloads: ${image.downloads}`;\n\n    a.appendChild(img);\n    card.appendChild(a);\n    card.appendChild(likes);\n    card.appendChild(views);\n    card.appendChild(comments);\n    card.appendChild(downloads);\n\n    gallery.appendChild(card);\n  });\n\n  lightbox.refresh();\n}\n\nfunction showMessage(message, type = 'error') {\n  iziToast[type]({\n    title: '',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction addLoader() {\n  const loader = document.querySelector('.loader');\n  loader.textContent = 'Loading...';\n  loader.classList.remove('hidden');\n}\n\nfunction removeLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('hidden');\n}\n\nexport { renderImages, showMessage, addLoader, removeLoader };\n","import { fetchImages, IMAGES_PER_PAGE } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showMessage,\n  addLoader,\n  removeLoader,\n} from './js/render-functions.js';\n\nlet page = 1;\nlet queryValue = '';\nlet totalHits = 0;\n\nwindow.addEventListener('DOMContentLoaded', event => {\n  const form = document.querySelector('form');\n  form.addEventListener('submit', handleSubmit);\n\n  const loadMoreButton = document.querySelector('.load-more-button');\n  loadMoreButton.addEventListener('click', handleLoadMore);\n});\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  page = 1;\n  queryValue = event.target.elements.query.value.trim();\n\n  if (!queryValue) {\n    showMessage('Please enter a search query.', 'warning');\n    return;\n  }\n\n  addLoader();\n  clearGallery();\n\n  try {\n    const response = await fetchImages(queryValue, page);\n    const images = response.hits;\n    totalHits = response.totalHits;\n\n    if (images.length === 0) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      document.querySelector('.load-more-button').style.display = 'none';\n      return;\n    }\n\n    renderImages(images);\n    document.querySelector('.load-more-button').style.display = 'block';\n\n    // Hide the load more button if the number of pages is less than or equal to the current page\n    if (Math.ceil(totalHits / IMAGES_PER_PAGE) <= page) {\n      document.querySelector('.load-more-button').style.display = 'none';\n      showMessage(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n    }\n  } catch (error) {\n    console.error('Error processing search:', error);\n    showMessage(\n      'An error occurred while processing your search. Please try again later.'\n    );\n  } finally {\n    removeLoader();\n  }\n}\n\nasync function handleLoadMore() {\n  page++;\n  addLoader();\n\n  try {\n    const response = await fetchImages(queryValue, page);\n    const images = response.hits;\n\n    if (images.length === 0) {\n      showMessage(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n      document.querySelector('.load-more-button').style.display = 'none';\n      return;\n    }\n\n    renderImages(images, true);\n\n    // Hide the load more button if the number of pages is less than or equal to the current page\n    if (Math.ceil(totalHits / IMAGES_PER_PAGE) <= page) {\n      document.querySelector('.load-more-button').style.display = 'none';\n      showMessage(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n    }\n\n    const cardHeight = document\n      .querySelector('.card')\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    showMessage(\n      'An error occurred while loading more images. Please try again later.'\n    );\n  } finally {\n    removeLoader();\n  }\n}\n\nfunction clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n"],"names":["API_KEY","IMAGES_PER_PAGE","fetchImages","query","page","url","response","axios","error","lightbox","SimpleLightbox","renderImages","images","append","gallery","image","card","a","img","likes","views","comments","downloads","showMessage","message","type","addLoader","loader","removeLoader","queryValue","totalHits","event","handleSubmit","handleLoadMore","clearGallery","cardHeight"],"mappings":"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"}